<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Carnet EPS — Application</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="assets/qrcode.min.js"></script>
  <script defer src="js/app.js"></script>
</head>
<body>
  <div class="bar">
    <div class="bar-inner">
      <div class="brand"><div style="color:var(--accent)"><svg viewBox="0 0 24 24" fill="none"><path d="M3 3h8v8H3V3Zm10 0h8v8h-8V3ZM3 13h8v8H3v-8Zm12 4h6v6h-6v-6Z" stroke="currentColor" stroke-width="2"/></svg></div><h1>Carnet — Espace élève</h1></div>
      <div class="switch"><span class="badge" id="help-id">ID élève = code court unique</span></div>
    </div>
  </div>

  <main class="container">
    <section class="card">
      <div class="stepper">
        <div class="step"><div class="dot active">1</div><div>Identité</div></div>
        <div class="step"><div class="dot">2</div><div>Séance</div></div>
        <div class="step"><div class="dot">3</div><div>QR</div></div>
      </div>
      <div class="row">
        <div class="field"><label>ID élève</label><input id="eleve_id" placeholder="VAU-T25-TLE1-012"><div class="helper">
          <strong>Recommandé</strong> : code fourni par le prof (ex. <span class="kbd">VAU-T25-TLE1-012</span>) = <em>Établissement–Année–Classe–N°</em>.
        </div></div>
        <div class="field"><label>Trimestre</label><input id="trimestre" value="T1-2025"></div>
        <div class="field"><label>Nom</label><input id="nom" placeholder="DURAND"></div>
        <div class="field"><label>Prénom</label><input id="prenom" placeholder="Emma"></div>
        <div class="field"><label>Classe</label><input id="classe" placeholder="Tle1"></div>
        <div class="field"><label>Sexe</label>
          <select id="sexe"><option value="F">F</option><option value="M">M</option></select>
        </div>
      </div>
      <div class="actions">
        <button id="btn_load" class="btn primary"><svg viewBox="0 0 24 24" fill="none"><path d="M5 21h14V7l-3-3H5v17Z" stroke="currentColor" stroke-width="2"/><path d="M7 21v-8h10v8M7 4v5h8V4" stroke="currentColor" stroke-width="2"/></svg><span>Charger / Créer</span></button>
        <a class="btn" href="index.html">Accueil</a>
        <a class="btn" href="securite.html">Fiche sécurité</a>
      </div>
    </section>

    <section class="card">
      <h2>Sélection de l’activité (APSA)</h2>
      <div class="chips" id="chips">
        <button class="chip active" data-apsa="Demi-fond">Demi‑fond</button>
        <button class="chip" data-apsa="Natation">Natation</button>
        <button class="chip" data-apsa="Escalade">Escalade</button>
        <button class="chip" data-apsa="Danse">Danse</button>
        <button class="chip" data-apsa="Badminton">Badminton</button>
        <button class="chip" data-apsa="Football">Football</button>
        <button class="chip" data-apsa="Volley">Volley</button>
        <button class="chip" data-apsa="Musculation">Musculation</button>
      </div>
      <div id="dyn_fields" class="row" style="margin-top:10px"></div>
      <div class="actions">
        <button id="btn_save_seance" class="btn ok"><svg viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg><span>Enregistrer la séance + QR</span></button>
        <span id="counter" class="badge">0 séance</span>
      </div>
    </section>

    <section class="card">
      <h2>Historique de mes séances</h2>
      <div class="table-wrap">
        <table>
          <thead id="thead"></thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
      <div class="actions">
        <label class="btn ghost" for="btn_import_json"><svg viewBox="0 0 24 24" fill="none"><path d="M5 21h14V7l-3-3H5v17Z" stroke="currentColor" stroke-width="2"/><path d="M7 21v-8h10v8M7 4v5h8V4" stroke="currentColor" stroke-width="2"/></svg><span>Importer JSON</span></label>
        <input id="btn_import_json" type="file" accept="application/json" style="display:none">
        <button id="btn_export_csv" class="btn"><svg viewBox="0 0 24 24" fill="none"><path d="M4 4h10l6 6v10a2 2 0 0 1-2 2H4V4Z" stroke="currentColor" stroke-width="2"/><path d="M14 4v6h6" stroke="currentColor" stroke-width="2"/></svg><span>Exporter CSV</span></button>
        <button id="btn_export_json" class="btn"><svg viewBox="0 0 24 24" fill="none"><path d="M5 21h14V7l-3-3H5v17Z" stroke="currentColor" stroke-width="2"/><path d="M7 21v-8h10v8M7 4v5h8V4" stroke="currentColor" stroke-width="2"/></svg><span>Exporter JSON</span></button>
        <button id="btn_mail" class="btn"><svg viewBox="0 0 24 24" fill="none"><path d="M3 6h18v12H3V6Z" stroke="currentColor" stroke-width="2"/><path d="M3 7l9 6 9-6" stroke="currentColor" stroke-width="2"/></svg><span>Envoyer au prof</span></button>
      </div>
    </section>

    <section id="qr_section" class="card" style="display:none">
      <h2>QR de la séance (à faire scanner)</h2>
      <div class="qr" id="qr_host"></div>
      <details style="margin-top:8px"><summary>Voir le JSON</summary><pre id="qr_text" class="helper"></pre></details>
    </section>
  </main>

  <div class="bottom-bar center">
    <div class="actions">
      <a class="btn ghost" href="index.html">Accueil</a>
      <a class="btn ghost" href="securite.html">Sécurité</a>
      <a class="btn primary icon" href="#qr_section"><svg viewBox="0 0 24 24" fill="none"><path d="M3 3h8v8H3V3Zm10 0h8v8h-8V3ZM3 13h8v8H3v-8Zm12 4h6v6h-6v-6Z" stroke="currentColor" stroke-width="2"/></svg><span>Dernier QR</span></a>
    </div>
  </div>

  <footer class="footer">© 2025 — Vauban EPS — Carnet EPS</footer>
</body>
</html>
